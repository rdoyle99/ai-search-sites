---
import Base from '../../layouts/Base.astro';
import { siteConfig } from '../../config';

const schema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Infrastructure Cost Estimator",
  "applicationCategory": "BusinessApplication",
  "description": "Estimate your monthly cold email infrastructure cost: domains, mailboxes, warm-up, and sending platform.",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
};
---

<Base
  title="Cold Email Infrastructure Cost Estimator | How Many Domains for Cold Email"
  description="Free tool: estimate your total monthly cold email infrastructure cost including domains, mailboxes, warm-up tools, and sending platforms."
  schema={schema}
>
  <section class="max-w-3xl mx-auto px-4 sm:px-6 py-12 md:py-20">
    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900">Infrastructure Cost Estimator</h1>
    <p class="mt-4 text-lg text-gray-600">
      Estimate your total monthly cold email infrastructure cost. Adjust the inputs to match your setup.
    </p>

    <div class="mt-10 p-6 border border-gray-200 rounded-lg bg-white">
      <div class="space-y-6">
        <div>
          <label for="num-domains" class="block text-sm font-medium text-gray-700">Number of domains</label>
          <input type="number" id="num-domains" value="5" min="1" max="100" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-lg" />
        </div>
        <div>
          <label for="mailboxes-per-domain" class="block text-sm font-medium text-gray-700">Mailboxes per domain</label>
          <select id="mailboxes-per-domain" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="1">1</option>
            <option value="2" selected>2 (recommended)</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
        <div>
          <label for="domain-registrar" class="block text-sm font-medium text-gray-700">Domain registrar pricing</label>
          <select id="domain-registrar" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="2">Budget ($2/mo — Namecheap, Porkbun)</option>
            <option value="5">Standard ($5/mo — GoDaddy, Google)</option>
            <option value="1" selected>Bulk discount ($1/mo — annual bulk)</option>
          </select>
        </div>
        <div>
          <label for="email-provider" class="block text-sm font-medium text-gray-700">Email hosting provider</label>
          <select id="email-provider" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="6" selected>Google Workspace ($6/mailbox/mo)</option>
            <option value="4">Outlook/Microsoft 365 ($4/mailbox/mo)</option>
            <option value="3">Zoho Mail ($3/mailbox/mo)</option>
            <option value="2">Budget SMTP ($2/mailbox/mo)</option>
          </select>
        </div>
        <div>
          <label for="warmup-tool" class="block text-sm font-medium text-gray-700">Warm-up tool</label>
          <select id="warmup-tool" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="3" selected>Standard warm-up ($3/mailbox/mo)</option>
            <option value="5">Premium warm-up ($5/mailbox/mo)</option>
            <option value="0">No warm-up tool ($0)</option>
            <option value="included">Included in sending platform</option>
          </select>
        </div>
        <div>
          <label for="sending-platform" class="block text-sm font-medium text-gray-700">Sending platform</label>
          <select id="sending-platform" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="0">No platform (manual sending)</option>
            <option value="39">Smartlead ($39/mo)</option>
            <option value="59">Instantly ($59/mo)</option>
            <option value="49" selected>Lemlist ($49/mo)</option>
            <option value="99">Apollo ($99/mo)</option>
            <option value="79">Sales.co ($79/mo)</option>
          </select>
        </div>
      </div>

      <div id="results" class="mt-8 p-6 bg-gray-50 rounded-lg">
        <h2 class="text-lg font-semibold text-gray-900">Monthly Cost Breakdown</h2>
        <div class="mt-4 space-y-3 text-sm">
          <div class="flex justify-between py-2 border-b border-gray-200">
            <span class="text-gray-600">Domains (<span id="cost-domain-count">5</span> domains)</span>
            <span id="cost-domains" class="font-semibold text-gray-900">$5</span>
          </div>
          <div class="flex justify-between py-2 border-b border-gray-200">
            <span class="text-gray-600">Email hosting (<span id="cost-mailbox-count">10</span> mailboxes)</span>
            <span id="cost-mailboxes" class="font-semibold text-gray-900">$60</span>
          </div>
          <div class="flex justify-between py-2 border-b border-gray-200">
            <span class="text-gray-600">Warm-up tool (<span id="cost-warmup-count">10</span> mailboxes)</span>
            <span id="cost-warmup" class="font-semibold text-gray-900">$30</span>
          </div>
          <div class="flex justify-between py-2 border-b border-gray-200">
            <span class="text-gray-600">Sending platform</span>
            <span id="cost-platform" class="font-semibold text-gray-900">$49</span>
          </div>
          <div class="flex justify-between py-3 border-t-2 border-gray-300 mt-2">
            <span class="font-bold text-gray-900 text-base">Total monthly cost</span>
            <span id="cost-total" class="font-bold text-blue-600 text-xl">$144</span>
          </div>
          <div class="flex justify-between py-2">
            <span class="text-gray-500">Annual cost</span>
            <span id="cost-annual" class="font-semibold text-gray-700">$1,728</span>
          </div>
        </div>

        <div class="mt-6 p-4 bg-white rounded-md border border-gray-200">
          <h3 class="text-sm font-semibold text-gray-700">Sending Capacity</h3>
          <div class="mt-2 grid grid-cols-2 gap-4">
            <div>
              <p class="text-sm text-gray-500">Total mailboxes</p>
              <p id="total-mailboxes" class="text-2xl font-bold text-gray-900">10</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">Daily capacity (@ 50/mailbox)</p>
              <p id="daily-capacity" class="text-2xl font-bold text-gray-900">500</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">Monthly capacity</p>
              <p id="monthly-capacity" class="text-2xl font-bold text-gray-900">10,000</p>
            </div>
            <div>
              <p class="text-sm text-gray-500">Cost per email</p>
              <p id="cost-per-email" class="text-2xl font-bold text-green-600">$0.014</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-8 p-6 border border-blue-200 rounded-lg bg-blue-50">
      <p class="text-sm font-medium text-blue-900">Want to reduce infrastructure costs?</p>
      <p class="mt-1 text-sm text-blue-700">
        <a href={siteConfig.product.url} target="_blank" rel="noopener noreferrer" class="font-semibold underline">{siteConfig.product.name}</a> bundles domain management, warm-up, and sending into one platform — often saving 30–50% vs. managing tools separately.
      </p>
      <a href={siteConfig.product.url} target="_blank" rel="noopener noreferrer" class="mt-3 inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-md hover:bg-blue-700 transition-colors">
        See {siteConfig.product.name} pricing &rarr;
      </a>
    </div>

    <div class="mt-12 prose max-w-none">
      <h2>How This Estimator Works</h2>
      <p>
        The infrastructure cost estimator calculates your total monthly spend across four categories: domain registration, email hosting (Google Workspace, Microsoft 365, or alternatives), warm-up tools, and your sending platform. Each cost is calculated per-unit and aggregated.
      </p>
      <p>
        For most teams, the biggest cost driver is email hosting — Google Workspace at $6/mailbox/month adds up quickly when you need 10–20 mailboxes. Warm-up tools are the second largest cost. The domain registration itself is usually the cheapest component, especially when buying in bulk.
      </p>
      <h2>Typical Cost Ranges</h2>
      <p>
        Based on data from 500+ cold email teams, here are typical monthly infrastructure costs by sending volume:
      </p>
      <ul>
        <li><strong>100–300 emails/day:</strong> $60–120/month (2–3 domains, 4–6 mailboxes)</li>
        <li><strong>300–1,000 emails/day:</strong> $120–300/month (4–8 domains, 8–16 mailboxes)</li>
        <li><strong>1,000–3,000 emails/day:</strong> $300–700/month (10–20 domains, 20–40 mailboxes)</li>
        <li><strong>3,000+ emails/day:</strong> $700+/month (20+ domains, 40+ mailboxes)</li>
      </ul>
      <p>
        The key insight is that cost scales linearly with volume, but the <em>cost per email</em> actually decreases at higher volumes due to fixed platform costs being amortized across more sends.
      </p>
    </div>
  </section>
</Base>

<script>
  function calculate() {
    const numDomains = parseInt((document.getElementById('num-domains') as HTMLInputElement).value) || 5;
    const mbPerDomain = parseInt((document.getElementById('mailboxes-per-domain') as HTMLSelectElement).value);
    const domainPrice = parseInt((document.getElementById('domain-registrar') as HTMLSelectElement).value);
    const emailPrice = parseInt((document.getElementById('email-provider') as HTMLSelectElement).value);
    const warmupVal = (document.getElementById('warmup-tool') as HTMLSelectElement).value;
    const platformPrice = parseInt((document.getElementById('sending-platform') as HTMLSelectElement).value);

    const totalMailboxes = numDomains * mbPerDomain;
    const warmupPrice = warmupVal === 'included' ? 0 : parseInt(warmupVal);

    const costDomains = numDomains * domainPrice;
    const costMailboxes = totalMailboxes * emailPrice;
    const costWarmup = totalMailboxes * warmupPrice;
    const costPlatform = platformPrice;
    const costTotal = costDomains + costMailboxes + costWarmup + costPlatform;
    const costAnnual = costTotal * 12;
    const dailyCapacity = totalMailboxes * 50;
    const monthlyCapacity = dailyCapacity * 20;
    const costPerEmail = monthlyCapacity > 0 ? (costTotal / monthlyCapacity).toFixed(3) : '0';

    document.getElementById('cost-domain-count')!.textContent = String(numDomains);
    document.getElementById('cost-domains')!.textContent = `$${costDomains}`;
    document.getElementById('cost-mailbox-count')!.textContent = String(totalMailboxes);
    document.getElementById('cost-mailboxes')!.textContent = `$${costMailboxes}`;
    document.getElementById('cost-warmup-count')!.textContent = String(totalMailboxes);
    document.getElementById('cost-warmup')!.textContent = `$${costWarmup}`;
    document.getElementById('cost-platform')!.textContent = `$${costPlatform}`;
    document.getElementById('cost-total')!.textContent = `$${costTotal}`;
    document.getElementById('cost-annual')!.textContent = `$${costAnnual.toLocaleString()}`;
    document.getElementById('total-mailboxes')!.textContent = String(totalMailboxes);
    document.getElementById('daily-capacity')!.textContent = dailyCapacity.toLocaleString();
    document.getElementById('monthly-capacity')!.textContent = monthlyCapacity.toLocaleString();
    document.getElementById('cost-per-email')!.textContent = `$${costPerEmail}`;
  }

  document.querySelectorAll('#num-domains, #mailboxes-per-domain, #domain-registrar, #email-provider, #warmup-tool, #sending-platform').forEach(el => {
    el.addEventListener('input', calculate);
    el.addEventListener('change', calculate);
  });
  calculate();
</script>
